<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Battlefield 6 Beta — Precision Countdown</title>
  <meta name="description" content="A hyper‑precise countdown to the Battlefield 6 beta reopening. Smooth WebGL background, sub‑second accuracy, and UTC‑true timing." />
  <style>
    :root{
      --bg:#0b0f14;          /* base background */
      --card:#0f1620cc;      /* glass card */
      --accent:#1ec8ff;      /* cyan accent */
      --accent-2:#9d7bff;    /* violet accent */
      --text:#e6edf3;        /* primary text */
      --muted:#8b98a5;       /* secondary text */
      --ok:#6df3a3;          /* ready color */
      --danger:#ff6b6b;      /* elapsed color */
      --shadow: 0 10px 40px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    html{background:var(--bg); color-scheme: dark;}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text); background:var(--bg); overflow:hidden;
    }
    canvas#fx{position:fixed; inset:0; width:100%; height:100%; display:block;}
    .grain{position:fixed; inset:-10%; pointer-events:none; opacity:.07; mix-blend-mode: overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
      background-size:200px 200px; animation:g 8s steps(60) infinite;
    }
    @keyframes g{to{transform:translate3d(-5%,3%,0)}}

    .wrap{position:relative; z-index:2; height:100%; display:grid; place-items:center; padding:24px;}
    .card{width:min(980px,92vw); backdrop-filter: blur(12px) saturate(120%);
      background:linear-gradient(180deg, rgba(22,31,44,.6), rgba(12,18,26,.6));
      border:1px solid rgba(255,255,255,.08); border-radius:24px; padding:36px; box-shadow:var(--shadow);
    }
    .title{display:flex; align-items:center; gap:14px; letter-spacing:.02em;}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04); color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:.12em;
    }
    .title h1{margin:0; font-size:clamp(24px, 3.6vw, 40px); font-weight:700;}

    .timer{margin-top:20px; display:flex; align-items:baseline; flex-wrap:wrap; gap:18px;}
    .main{font-variant-numeric: tabular-nums lining-nums; font-feature-settings: "tnum" 1, "lnum" 1;
      font-size:clamp(40px, 8.5vw, 120px); line-height:1; font-weight:800; letter-spacing:.02em;
      text-shadow: 0 2px 18px rgba(30,200,255,.25);
    }
    .ms{font-size:clamp(18px, 2.5vw, 36px); opacity:.9}
    .units{display:flex; gap:12px; color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:.18em;}

    .meta{margin-top:18px; display:flex; flex-wrap:wrap; gap:12px; align-items:center; color:var(--muted);}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.92rem;
      padding:.35rem .6rem; border-radius:10px; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); color:var(--text);
    }
    .status{margin-left:auto; padding:.35rem .6rem; border-radius:10px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.04);}
    .status.open{color:var(--ok); box-shadow:0 0 0 2px rgba(109,243,163,.1) inset}
    .status.elapsed{color:var(--danger); box-shadow:0 0 0 2px rgba(255,107,107,.1) inset}

    .footer{margin-top:28px; display:flex; flex-wrap:wrap; gap:12px; align-items:center; color:var(--muted); font-size:.95rem}
    .small{font-size:.9rem}
    .btn{appearance:none; border:0; cursor:pointer; display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:12px; color:var(--text); background:linear-gradient(90deg, rgba(30,200,255,.18), rgba(157,123,255,.18));
      border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow); transition: transform .15s ease, box-shadow .15s ease, background .3s ease;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: 0 14px 50px rgba(0,0,0,.5)}
    .btn:active{transform: translateY(0)}

    /* responsive niceties */
    @media (max-width:520px){
      .card{padding:22px}
      .units{width:100%; justify-content:space-between}
    }
  </style>
</head>
<body>
  <canvas id="fx" aria-hidden="true"></canvas>
  <div class="grain" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" role="region" aria-label="Battlefield 6 beta countdown">
      <div class="title">
        <span class="pill" title="Target is locked to UTC">UTC‑TRUE</span>
        <h1>Battlefield 6 Beta — Reopens In</h1>
      </div>

      <div class="timer" aria-live="polite">
        <div class="main" id="mainTime">00:00:00</div>
        <div class="ms" id="msTime">.000</div>
      </div>

      <div class="units">
        <div>Days</div>
        <div>Hours</div>
        <div>Minutes</div>
        <div>Seconds</div>
        <div>Milliseconds</div>
      </div>

      <div class="meta">
        <div class="kbd" id="targetUtc"></div>
        <div class="kbd" id="targetLocal"></div>
        <div class="status" id="status">Locked</div>
      </div>

      <div class="footer">
        <button class="btn" id="copyLink" title="Copy a shareable link with the target time embedded">Share</button>
        <span class="small">Uses your device clock. Precision shown to milliseconds; updates ~60Hz with high‑res timer.</span>
      </div>
    </section>
  </main>

  <script>
  (function(){
    "use strict";

    // ===== Target Timestamp (UTC) =====
    // Default: Thu, 14 Aug 2025 08:00:00 UTC
    // You can override via URL, e.g. ?t=2025-08-14T08:00:00Z
    const url = new URL(location.href);
    const tParam = url.searchParams.get('t');

    const defaultUTC = Date.UTC(2025, 7, 14, 8, 0, 0, 0); // months are 0-based
    const targetUTCms = (function(){
      if (!tParam) return defaultUTC;
      const parsed = Date.parse(tParam);
      return isNaN(parsed) ? defaultUTC : parsed;
    })();

    // Show target timestamps
    const fmtUTC = new Intl.DateTimeFormat('en-GB', { timeZone: 'UTC', dateStyle:'full', timeStyle:'long' });
    const fmtLocal = new Intl.DateTimeFormat(undefined, { dateStyle:'full', timeStyle:'long' });
    document.getElementById('targetUtc').textContent = 'Target (UTC): ' + fmtUTC.format(targetUTCms);
    document.getElementById('targetLocal').textContent = 'Local: ' + fmtLocal.format(targetUTCms);

    // ===== High‑precision ticker =====
    const mainEl = document.getElementById('mainTime');
    const msEl = document.getElementById('msTime');
    const statusEl = document.getElementById('status');

    // Use a stable epoch combining Date.now() with performance.now() to reduce jitter.
    const baseNow = Date.now();
    const basePerf = performance.now();

    function nowMs(){
      return baseNow + (performance.now() - basePerf);
    }

    function fmt(n){ return String(n).padStart(2,'0'); }
    function clamp(v,min,max){ return v<min?min:(v>max?max:v); }

    let opened = false;

    function tick(t){
      const remaining = targetUTCms - nowMs();
      const remainingAbs = Math.abs(remaining);

      // Breakdown
      const totalMs = Math.floor(remainingAbs);
      const ms = totalMs % 1000;
      const totalSec = (totalMs - ms) / 1000;
      const s = totalSec % 60;
      const totalMin = (totalSec - s) / 60;
      const m = totalMin % 60;
      const totalHr = (totalMin - m) / 60;
      const h = totalHr % 24;
      const d = (totalHr - h) / 24;

      mainEl.textContent = `${fmt(d)}:${fmt(h)}:${fmt(m)}:${fmt(s)}`;
      msEl.textContent = "." + String(ms).padStart(3,'0');

      if (remaining <= 0){
        if (!opened){
          statusEl.textContent = 'Open Now';
          statusEl.classList.remove('elapsed');
          statusEl.classList.add('open');
          opened = true;
        }
      } else {
        statusEl.textContent = 'Locked';
        statusEl.classList.remove('open','elapsed');
      }

      requestAnimationFrame(tick);
    }

    requestAnimationFrame(tick);

    // ===== Share link =====
    document.getElementById('copyLink').addEventListener('click', async () => {
      const iso = new Date(targetUTCms).toISOString();
      const shareUrl = new URL(location.href);
      shareUrl.searchParams.set('t', iso);
      try {
        await navigator.clipboard.writeText(shareUrl.toString());
        const btn = document.getElementById('copyLink');
        const old = btn.textContent; btn.textContent = 'Copied!';
        setTimeout(()=>btn.textContent=old, 1200);
      } catch(err){
        alert('Copy failed. URL: ' + shareUrl.toString());
      }
    });

    // ===== WebGL animated background (lightweight, interactive) =====
    // Aurora‑like bands reacting subtly to mouse; time‑based animation.
    const canvas = document.getElementById('fx');
    const gl = canvas.getContext('webgl', { antialias: true, depth: false, stencil: false, premultipliedAlpha: false, powerPreference: 'high-performance' });

    function resize(){
      const dpr = clamp(window.devicePixelRatio||1, 1, 2);
      const w = Math.floor(innerWidth * dpr);
      const h = Math.floor(innerHeight * dpr);
      if (canvas.width !== w || canvas.height !== h){
        canvas.width = w; canvas.height = h; canvas.style.width = '100%'; canvas.style.height = '100%';
        gl.viewport(0,0,w,h);
      }
    }
    addEventListener('resize', resize, { passive: true });
    resize();

    const vert = `
      attribute vec2 p; varying vec2 v;
      void main(){ v = p*0.5+0.5; gl_Position = vec4(p,0.0,1.0); }
    `;

    const frag = `
      precision highp float; varying vec2 v;
      uniform vec2 res; uniform float time; uniform vec2 mouse;

      // hash & noise (cheap)
      float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7)))*43758.5453123); }
      float noise(vec2 p){
        vec2 i=floor(p), f=fract(p);
        float a=hash(i), b=hash(i+vec2(1.,0.)), c=hash(i+vec2(0.,1.)), d=hash(i+vec2(1.,1.));
        vec2 u=f*f*(3.-2.*f);
        return mix(a,b,u.x)+ (c-a)*u.y*(1.-u.x) + (d-b)*u.x*u.y;
      }

      vec3 aurora(vec2 uv){
        // center & aspect
        uv = (uv - 0.5) * vec2(res.x/res.y, 1.0);
        // gentle parallax with mouse
        uv += (mouse - 0.5) * 0.12;
        float t = time*0.06;

        // layered bands
        float n1 = noise(uv*1.2 + vec2(t, -t));
        float n2 = noise(uv*2.3 + vec2(-t*0.7, t*1.1));
        float n3 = noise(uv*4.0 + vec2(t*1.3, t*0.5));

        float band = smoothstep(0.35, 1.0, n1*0.6 + n2*0.3 + n3*0.1);
        float glow = smoothstep(0.0, 1.2, band) * 0.85;

        vec3 c1 = vec3(0.12, 0.78, 1.0); // cyan
        vec3 c2 = vec3(0.62, 0.48, 1.0); // violet
        vec3 mixc = mix(c2, c1, n2);

        vec3 col = mix(vec3(0.02,0.05,0.09), mixc, glow);
        // subtle scanline / vignette
        float vig = smoothstep(1.2, 0.2, length(uv*0.9));
        col *= mix(0.9, 1.15, vig);
        return col;
      }

      void main(){
        vec3 col = aurora(v);
        gl_FragColor = vec4(col, 1.0);
      }
    `;

    function compile(type, src){
      const s = gl.createShader(type); gl.shaderSource(s, src); gl.compileShader(s);
      if(!gl.getShaderParameter(s, gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(s);
      return s;
    }

    function program(vsSrc, fsSrc){
      const p = gl.createProgram();
      gl.attachShader(p, compile(gl.VERTEX_SHADER, vsSrc));
      gl.attachShader(p, compile(gl.FRAGMENT_SHADER, fsSrc));
      gl.linkProgram(p);
      if(!gl.getProgramParameter(p, gl.LINK_STATUS)) throw gl.getProgramInfoLog(p);
      return p;
    }

    const prog = program(vert, frag);
    gl.useProgram(prog);
    const buf = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, buf);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
      -1,-1,  1,-1, -1,1,
      -1, 1,  1,-1, 1, 1
    ]), gl.STATIC_DRAW);
    const loc = gl.getAttribLocation(prog, 'p');
    gl.enableVertexAttribArray(loc); gl.vertexAttribPointer(loc, 2, gl.FLOAT, false, 0, 0);

    const uRes = gl.getUniformLocation(prog, 'res');
    const uTime = gl.getUniformLocation(prog, 'time');
    const uMouse = gl.getUniformLocation(prog, 'mouse');

    let mouse = {x:.5, y:.5};
    addEventListener('pointermove', e=>{
      mouse.x = clamp(e.clientX / innerWidth, 0, 1);
      mouse.y = clamp(e.clientY / innerHeight, 0, 1);
    }, { passive: true });

    function draw(){
      gl.uniform2f(uRes, canvas.width, canvas.height);
      gl.uniform1f(uTime, performance.now()*0.001);
      gl.uniform2f(uMouse, mouse.x, 1.0 - mouse.y);
      gl.drawArrays(gl.TRIANGLES, 0, 6);
      requestAnimationFrame(draw);
    }
    draw();
  })();
  </script>
</body>
</html>
